var my_popbox=window.my_popbox||{version:"1.0"};!function(t,o){var n=function(t,o){t=t instanceof Function?t:function(){},o=o instanceof Function?{init:o}:o;var n=function(){var t=this.init instanceof Function?this.init.apply(this,arguments):this;return t},i=function(){};return i.prototype=t.prototype,n.prototype=new i,e(n.prototype,o,function(t,o){t[o]instanceof Function&&(t[o]._name=o,t[o]._owner=n)}),e(n.prototype,{parent:function(){return arguments.callee.caller._owner._superClass},parentProto:function(){return arguments.callee.caller._owner._superClass.prototype},callParent:function(){var t=Array.prototype.slice.call(arguments);return arguments.callee.caller._owner._superClass.prototype[t.shift(0)].apply(this,t)},bind:function(){var t=jQuery(this);t.bind.apply(t,arguments)},one:function(){var t=jQuery(this);t.one.apply(t,arguments)},trigger:function(){var t=jQuery(this);t.trigger.apply(t,arguments)},triggerHandler:function(){var t=jQuery(this);t.triggerHandler.apply(t,arguments)},unbind:function(){var t=jQuery(this);t.unbind.apply(t,arguments)}}),n._superClass=t,n._super=t.prototype,n.constructor=arguments.callee,n.prototype.constructor=n,n},e=function(t,o,n){for(var e in o)t[e]=o[e],n instanceof Function?n.call(t,t,e):void 0;return t};e(o,{extend:e,createClass:n})}(my_popbox,my_popbox.object=my_popbox.object||{}),document.write('<div id="tb_show2_mask" style="display:none"></div>'),document.write('<div id="tb_show2_box" style="display:none"></div>'),function(t,o,n){{var e="BackCompat"==document.compatMode,i=n.browser.msie&&"6.0"==n.browser.version,r=t.object.createClass(null,{version:"1.0",dom:null,_name:null,_conf:{opacity:.35,zIndex:1e3,color:"#000",closeOnClick:!1},init:function(t){var o=this;t=this._conf=n.extend({},this._conf,t),this._name=(new Date).getTime();var e=this.dom=t.dom?n(t.dom):n("<div/>").appendTo("body"),r=this.viewport();if(e.css({position:"fixed",top:0,left:0,width:r[0],height:r[1],display:"none",opacity:t.opacity,zIndex:t.zIndex,backgroundColor:t.color}),i&&e.css({position:"absolute"}),t.closeOnClick&&e.bind("click.mask"+this._name,function(){o.hide()}),i){var s=jQuery("<iframe/>").attr({border:0,frameborder:0}).css({position:"absolute","z-index":-1,left:0,top:0,opacity:0,width:"100%",height:"100%",border:0});e.append(s).append(jQuery("<div/>").css({width:"100%",height:"100%",border:0}))}},getDom:function(){return this.dom},getConf:function(){return this._conf},viewport:function(){return i?[n(document).width(),n(document).height()]:["100%","100%"]},adjust:function(){if(i){var t=this.viewport();this.dom.css({width:t[0],height:t[1]})}},_oldHtmlOverflow:null,_oldHtmlOverflowX:null,_oldHtmlOverflowY:null,show:function(){var t=this;if(i){var o=this.__oldHtmlOverflowX=this._oldHtmlOverflowX||jQuery("html").css("overflow-x"),e=this.__oldHtmlOverflowX=this._oldHtmlOverflowX||jQuery("html").css("overflow-y");jQuery("html").css("overflow","hidden"),this.bind("hideHandle",function(){jQuery("html").css("overflow-x",o),jQuery("html").css("overflow-y",e),this._oldHtmlOverflow=null})}this.adjust(),n(window).unbind("resize.mask"+this._name).bind("resize.mask"+this._name,function(){t.adjust()}),this.dom.show(),this.trigger("showHandle")},hide:function(){n(window).unbind("resize.mask"+this._name),this.dom.hide(),this.trigger("hideHandle")},destroy:function(){this.hide(),this.dom.remove(),this.dom=null,this._conf=null}}),s=t.object.createClass(null,{version:"1.0",dom:null,_name:null,_conf:{zIndex:1e3,fixed:!(e||i),content:null},init:function(t){t=this._conf=n.extend({},this._conf,t),this._name=(new Date).getTime();this.dom=t.dom?n(t.dom):n("<div/>").css("display","none").appendTo("body");this.append(t.content),this.dom.css({zIndex:t.zIndex,position:"absolute"}),this.getConfValue("fixed")||(this._bindScroll(),this._bindResize())},getDom:function(){return this.dom},getConf:function(){return this._conf},getConfValue:function(t){return this._conf[t]},adjust:function(){this.getConfValue("fixed")?this.dom.css({position:"fixed",top:"50%",left:"50%",marginTop:-this.dom.height()/2,marginLeft:-this.dom.width()/2}):this.setPosition(!1)},show:function(){this.adjust(),this.dom.show(),this.trigger("showHandle")},hide:function(){this._unbindScroll(),this._unbindResize(),this.dom.hide(),this.trigger("hideHandle")},append:function(t){this.dom.append(t)},html:function(t){this.dom.html(t)},destroy:function(){this.hide(),this.dom.remove(),this.dom=null,this._conf=null},_bindScroll:function(){var t=this;n(window).unbind("scroll."+this._name).bind("scroll."+this._name,function(){t.setPosition(!1)})},_unbindScroll:function(){n(window).unbind("scroll."+this._name)},_bindResize:function(){var t=this;n(window).unbind("resize."+this._name).bind("resize."+this._name,function(){t.setPosition(!1)})},_unbindResize:function(){n(window).unbind("resize."+this._name)},setPosition:function(t){var o=e?document.body.scrollTop:document.documentElement.scrollTop,i=e?document.body.scrollLeft:document.documentElement.scrollLeft,r=i+(n(window).width()-this.dom.width())/2,s=o+(n(window).height()-this.dom.height())/2;t?this.dom.stop().animate({left:r,top:s},500):this.dom.css({left:r,top:s})}});t.object.createClass(null,{init:function(){}})}o.Mask=r,o.CenterBox=s}(my_popbox,my_popbox.ui=my_popbox.ui||{},jQuery),function(t){var o,n,e=100,i=function(t,i){o||(o=new my_popbox.ui.Mask({dom:"#tb_show2_mask",zIndex:e})),o.show(),n||(n=new my_popbox.ui.CenterBox({dom:"#tb_show2_box",zIndex:e+1}),n.getDom().css({backgroundColor:"#fff",overflow:"hidden",border:"1px solid #3D5F80"}),n.bind("hideHandle",function(){this.html(""),o.hide()}));var r={};if(i.width&&(r.width=i.width),i.height&&(r.height=i.height),n.getDom().css(r),t&&(t='<h2 style="background:#518AC4 none repeat scroll 0 0;color:#fff;font-size:14px;height:30px;font-weight:bold;line-height:30px;text-indent:1em;margin:0;padding:0;text-align:left"><img onclick="tb_show2_exit()" style="float:right;margin:7px;cursor:pointer" src="http://static.tianyaui.com/global/gnav/images/close.gif" />'+t+"</h2>"),i.html&&(n.html(""),n.append(t),n.append(i.html)),i.src){n.getDom().css({backgroundColor:"transparent",overflow:"hidden",border:"none"}),n.html(""),n.append(t),n.append('<div id="my_popbox_div" style="width:100%;height:100%;text-align:center;"></div>');var s=i.src+(i.src.indexOf("?")>-1?"&":"?")+"random="+(new Date).getTime();jQuery("#my_popbox_div").append('<img style="margin-top:50px;" src="http://static.tianyaui.com/img/static/2008/gif/loadingAnimation.gif" />'),jQuery("#my_popbox_div").append('<iframe id="my_popbox_iframeID" src="'+s+'" onload="tb_showIframe2()" frameborder="0" style="display:none;width:100%;height:100%;border:0;overflow:hidden" ></iframe>')}n.show()},r=function(){n.hide()},s=function(){jQuery("#my_popbox_div iframe").show(),jQuery("#my_popbox_div img").hide(),jQuery("#tb_show2_box").css({backgroundColor:"#fff",overflow:"hidden",border:"1px solid #3D5F80"})};t.tb_showIframe2=s,t.tb_show2=i,t.tb_show2_exit=r}(window),function(){window.tb_remove2=tb_show2_exit,window._my_bbs={server:"http://my.tianya.cn",urlpopbox:"http://my.tianya.cn/interface/user/popbox.jsp",getConfig:function(t){var o=window.IntIDitem||"",n=window.chrTitleOnly||"",e=window.intArticleId||"",i=window.intAuthorId||"",r=window.chrAuthorName||"",s=window.strPageUrl||"",l="&blockid="+encodeURIComponent(o)+"&title="+encodeURIComponent(n)+"&articleid="+encodeURIComponent(e)+(i?"&writerid="+i:"")+"&writer="+encodeURIComponent(r)+"&url="+encodeURIComponent(s),d=encodeURIComponent;return"bbs"===t&&(l="&type="+d("论坛")+"&title="+d(n)+"&url="+d(s)+"&head="+d(o)+"&uid="+d(i)+"&uname="+d(r)+"&from="+d("天涯论坛")),l},follow:function(){var t=_my_bbs.server+"/interface/recommend/follow.jsp?act=addfollowbypop"+(window.intAuthorId?"&userid="+intAuthorId:"")+(window.chrAuthorName?"&username="+escape(chrAuthorName):"");__global.isOnline()||(t=_my_bbs.urlpopbox+"?mypopbox=login&fowardurl="+encodeURIComponent(t)),tb_show2("关注",{width:320,height:180,src:t})},collect:function(){var t=_my_bbs.server+"/interface/user/aritcleCollect.jsp?act=addcollectbypop"+_my_bbs.getConfig("bbs");__global.isOnline()||(t=_my_bbs.urlpopbox+"?mypopbox=login&fowardurl="+encodeURIComponent(t)),tb_show2("收藏",{width:320,height:180,src:t})},share:function(){return void __my.action.shareTwitter(_my_bbs.getConfig("bbs"))}},window._my_collect=function(name){var server="http://my.tianya.cn",urlpopbox="http://my.tianya.cn/interface/user/popbox.jsp",ah=[],config=jQuery(name).attr("_collectdata")||window[name],url;if(config){if("string"==typeof config)try{eval("config = "+config)}catch(e){return}for(var fat in config)ah.push(fat+"="+encodeURIComponent(config[fat]));url=server+"/interface/user/aritcleCollect.jsp?act=addcollectbypop&"+ah.join("&"),__global.isOnline()||(url=_my_bbs.urlpopbox+"?mypopbox=login&fowardurl="+encodeURIComponent(url)),tb_show2("收藏",{width:320,height:180,src:url})}},window.__my={action:{urlPopBox:"http://my.tianya.cn/interface/user/popbox.jsp",pop:function(t,o,n,e){tb_show2(t||"提示",{width:n||320,height:e||180,src:this.checkUrl(o)})},checkUrl:function(t){return __global.isOnline()||(t=this.urlPopBox+"?mypopbox=login&fowardurl="+encodeURIComponent(t)),t},follow:function(t){tb_show2("关注",{width:320,height:180,src:this.checkUrl("http://my.tianya.cn/interface/recommend/follow.jsp?act=addfollowbypop&"+t)})},collect:function(t){tb_show2("收藏",{width:320,height:180,src:this.checkUrl("http://my.tianya.cn/interface/user/aritcleCollect.jsp?act=addcollectbypop&"+t)})},share:function(t){this.shareTwitter(t)},shareTwitter:function(t){return __global.isOnline()?void tb_show2("",{width:610,height:184,src:this.checkUrl("http://my.tianya.cn/ifr.jsp?tType=shareTwitter"+t)}):void MenuUtil.login("该功能需要登录后才能使用",window.location.href,window.location.href)},newTwitter:function(t){return __global.isOnline()?void tb_show2("",{width:610,height:184,src:this.checkUrl("http://my.tianya.cn/ifr.jsp?tType=newTwitter"+(t?"&"+t:""))}):void MenuUtil.login("该功能需要登录后才能使用",window.location.href,window.location.href)}}}}();